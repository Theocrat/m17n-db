<?xml version='1.0'?>
<input-method xmlns="http://www.m17n.org/MIM">
  <tags>
    <language>si</language>
    <name>wijesekera</name>
  </tags>
  <m17n-version>1.6.0</m17n-version>
  <description>Sinhala input method based on SLS 1134 Rev. 2:2004.
  &lt;http://www.siyabas.lk/docs/sin-kbd-layout5.pdf&gt;
Although this code supports both surrounding text and preedit,
the former is disabled by default to avoid confusion caused by
faulty applications.
</description>
  <title>සි</title>
  <variable-list>
    <defvar vname="use-surrounding-text">
      <description>
        <gettext>Surrounding text vs. preedit.
If 1, try to use surrounding text.  Otherwise, use preedit.</gettext>
      </description>
      <integer>0</integer>
      <possible-value>
        <integer>1</integer>
        <integer>0</integer>
      </possible-value>
    </defvar>
  </variable-list>
  <macro-list>
    <defmacro fname="macro-forward">
      <set vname="cc3">
        <char-at>
          <marker>@+2</marker>
        </char-at>
      </set>
      <cond>
        <list>
          <logand>
            <eq>
              <char-at>
                <marker>@+0</marker>
              </char-at>
              <integer>0x0DCA</integer>
            </eq>
            <eq>
              <char-at>
                <marker>@+1</marker>
              </char-at>
              <integer>0x200D</integer>
            </eq>
            <ge>
              <varref vname="cc3"/>
              <integer>0x0D9A</integer>
            </ge>
            <le>
              <varref vname="cc3"/>
              <integer>0x0DC6</integer>
            </le>
          </logand>
          <delete>
            <marker>@+3</marker>
          </delete>
          <insert>
            <integer>0x0DCA</integer>
          </insert>
          <insert>
            <integer>0x200D</integer>
          </insert>
          <insert>
            <varref vname="cc3"/>
          </insert>
          <funcall fname="macro-forward"/>
        </list>
      </cond>
    </defmacro>
    <defmacro fname="macro-backward">
      <set vname="cc1">
        <char-at>
          <marker>@-1</marker>
        </char-at>
      </set>
      <cond>
        <list>
          <logand>
            <eq>
              <char-at>
                <marker>@-3</marker>
              </char-at>
              <integer>0x0DCA</integer>
            </eq>
            <eq>
              <char-at>
                <marker>@-2</marker>
              </char-at>
              <integer>0x200D</integer>
            </eq>
            <ge>
              <varref vname="cc1"/>
              <integer>0x0D9A</integer>
            </ge>
            <le>
              <varref vname="cc1"/>
              <integer>0x0DC6</integer>
            </le>
          </logand>
          <delete>
            <marker>@-3</marker>
          </delete>
          <insert>
            <integer>0x0DCA</integer>
          </insert>
          <insert>
            <integer>0x200D</integer>
          </insert>
          <insert>
            <varref vname="cc1"/>
          </insert>
          <move>
            <marker>@&lt;</marker>
          </move>
          <funcall fname="macro-backward"/>
        </list>
      </cond>
    </defmacro>
    <defmacro fname="macro-delete-preceding-zw">
      <cond>
        <list>
          <logior>
            <eq>
              <char-at>
                <marker>@-1</marker>
              </char-at>
              <integer>0x200C</integer>
            </eq>
            <eq>
              <char-at>
                <marker>@-1</marker>
              </char-at>
              <integer>0x200D</integer>
            </eq>
          </logior>
          <delete>
            <marker>@-1</marker>
          </delete>
          <funcall fname="macro-delete-preceding-zw"/>
        </list>
      </cond>
    </defmacro>
    <defmacro fname="macro-delete-following-zw">
      <cond>
        <list>
          <logior>
            <eq>
              <char-at>
                <marker>@+0</marker>
              </char-at>
              <integer>0x200C</integer>
            </eq>
            <eq>
              <char-at>
                <marker>@+0</marker>
              </char-at>
              <integer>0x200D</integer>
            </eq>
          </logior>
          <delete>
            <marker>@+1</marker>
          </delete>
          <funcall fname="macro-delete-following-zw"/>
        </list>
      </cond>
    </defmacro>
    <defmacro fname="macro-merge-kombuva">
      <delete>
        <marker>@-1</marker>
      </delete>
      <delete>
        <marker>@+2</marker>
      </delete>
      <insert>
        <varref vname="c1"/>
      </insert>
    </defmacro>
  </macro-list>
  <map-list>
    <map mname="map-starter">
      <rule>
        <keyseq>
          <string>A</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>B</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>C</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>D</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>E</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>F</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>G</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>H</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>I</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>J</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>K</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>L</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>M</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>N</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>O</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>P</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>Q</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>R</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>S</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>T</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>U</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>V</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>W</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>X</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>Y</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>Z</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>a</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>b</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>c</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>d</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>e</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>f</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>g</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>h</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>i</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>j</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>k</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>l</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>m</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>n</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>o</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>p</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>q</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>r</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>s</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>t</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>u</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>v</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>w</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>x</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>y</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>z</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>`</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>~</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>[</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>{</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>]</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>}</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>\</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>|</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>;</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>:</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>'</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>"</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>,</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>&lt;</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>.</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <string>&gt;</string>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <list>
            <symbol>A-o</symbol>
          </list>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <list>
            <symbol>A-.</symbol>
          </list>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <list>
            <symbol>A-v</symbol>
          </list>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <list>
            <symbol>A-c</symbol>
          </list>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <list>
            <symbol>A-x</symbol>
          </list>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <list>
            <symbol>S- </symbol>
          </list>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <list>
            <symbol>A- </symbol>
          </list>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <list>
            <symbol>A-,</symbol>
          </list>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <list>
            <symbol>A-a</symbol>
          </list>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <list>
            <symbol>A-'</symbol>
          </list>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <list>
            <symbol>A-z</symbol>
          </list>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <list>
            <symbol>BackSpace</symbol>
          </list>
        </keyseq>
      </rule>
      <rule>
        <keyseq>
          <list>
            <symbol>Delete</symbol>
          </list>
        </keyseq>
      </rule>
    </map>
    <map mname="map-consonant">
      <rule>
        <keyseq>
          <string>l</string>
        </keyseq>
        <insert>
          <string>ක</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>L</string>
        </keyseq>
        <insert>
          <string>ඛ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>.</string>
        </keyseq>
        <insert>
          <string>ග</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>&gt;</string>
        </keyseq>
        <insert>
          <string>ඝ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>X</string>
        </keyseq>
        <insert>
          <string>ඞ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <list>
            <symbol>A-.</symbol>
          </list>
        </keyseq>
        <insert>
          <string>ඟ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>p</string>
        </keyseq>
        <insert>
          <string>ච</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>P</string>
        </keyseq>
        <insert>
          <string>ඡ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>c</string>
        </keyseq>
        <insert>
          <string>ජ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>C</string>
        </keyseq>
        <insert>
          <string>ඣ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>[</string>
        </keyseq>
        <insert>
          <string>ඤ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>{</string>
        </keyseq>
        <insert>
          <string>ඥ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <list>
            <symbol>A-c</symbol>
          </list>
        </keyseq>
        <insert>
          <string>ඦ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>g</string>
        </keyseq>
        <insert>
          <string>ට</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>G</string>
        </keyseq>
        <insert>
          <string>ඨ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>v</string>
        </keyseq>
        <insert>
          <string>ඩ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>V</string>
        </keyseq>
        <insert>
          <string>ඪ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>K</string>
        </keyseq>
        <insert>
          <string>ණ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <list>
            <symbol>A-v</symbol>
          </list>
        </keyseq>
        <insert>
          <string>ඬ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>;</string>
        </keyseq>
        <insert>
          <string>ත</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>:</string>
        </keyseq>
        <insert>
          <string>ථ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>o</string>
        </keyseq>
        <insert>
          <string>ද</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>O</string>
        </keyseq>
        <insert>
          <string>ධ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>k</string>
        </keyseq>
        <insert>
          <string>න</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <list>
            <symbol>A-o</symbol>
          </list>
        </keyseq>
        <insert>
          <string>ඳ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>m</string>
        </keyseq>
        <insert>
          <string>ප</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>M</string>
        </keyseq>
        <insert>
          <string>ඵ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>n</string>
        </keyseq>
        <insert>
          <string>බ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>N</string>
        </keyseq>
        <insert>
          <string>භ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>u</string>
        </keyseq>
        <insert>
          <string>ම</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>U</string>
        </keyseq>
        <insert>
          <string>ඹ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>h</string>
        </keyseq>
        <insert>
          <string>ය</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>r</string>
        </keyseq>
        <insert>
          <string>ර</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>,</string>
        </keyseq>
        <insert>
          <string>ල</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>j</string>
        </keyseq>
        <insert>
          <string>ව</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>Y</string>
        </keyseq>
        <insert>
          <string>ශ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>I</string>
        </keyseq>
        <insert>
          <string>ෂ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>i</string>
        </keyseq>
        <insert>
          <string>ස</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>y</string>
        </keyseq>
        <insert>
          <string>හ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>&lt;</string>
        </keyseq>
        <insert>
          <string>ළ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>F</string>
        </keyseq>
        <insert>
          <string>ෆ</string>
        </insert>
      </rule>
    </map>
    <map mname="map-misc">
      <rule>
        <keyseq>
          <string>x</string>
        </keyseq>
        <insert>
          <string>ං</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <list>
            <symbol>A-x</symbol>
          </list>
        </keyseq>
        <insert>
          <string>ඃ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>w</string>
        </keyseq>
        <insert>
          <string>අ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>b</string>
        </keyseq>
        <insert>
          <string>ඉ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>B</string>
        </keyseq>
        <insert>
          <string>ඊ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>W</string>
        </keyseq>
        <insert>
          <string>උ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>R</string>
        </keyseq>
        <insert>
          <string>ඍ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <list>
            <symbol>A-,</symbol>
          </list>
        </keyseq>
        <insert>
          <string>ඏ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>T</string>
        </keyseq>
        <insert>
          <string>ඔ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>s</string>
        </keyseq>
        <insert>
          <string>ි</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>S</string>
        </keyseq>
        <insert>
          <string>ී</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>q</string>
        </keyseq>
        <insert>
          <string>ු</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>Q</string>
        </keyseq>
        <insert>
          <string>ූ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <list>
            <symbol>A-a</symbol>
          </list>
        </keyseq>
        <insert>
          <string>ෳ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <list>
            <symbol>A-'</symbol>
          </list>
        </keyseq>
        <insert>
          <string>෴</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>]</string>
        </keyseq>
        <insert>
          <string>;</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>}</string>
        </keyseq>
        <insert>
          <string>:</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>'</string>
        </keyseq>
        <insert>
          <string>.</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>"</string>
        </keyseq>
        <insert>
          <string>,</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>z</string>
        </keyseq>
        <insert>
          <string>'</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>Z</string>
        </keyseq>
        <insert>
          <string>"</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>|</string>
        </keyseq>
        <insert>
          <string>‍්</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>J</string>
        </keyseq>
        <insert>
          <string>ළු</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <list>
            <symbol>S- </symbol>
          </list>
        </keyseq>
        <insert>
          <string> </string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <list>
            <symbol>A- </symbol>
          </list>
        </keyseq>
        <insert>
          <string>‌</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>t</string>
        </keyseq>
        <set vname="c">
          <char-at>
            <marker>@-2</marker>
          </char-at>
        </set>
        <cond>
          <list>
            <eq>
              <char-at>
                <marker>@-1</marker>
              </char-at>
              <integer>0x0DD9</integer>
            </eq>
            <cond>
              <list>
                <eq>
                  <varref vname="c"/>
                  <integer>0x200C</integer>
                </eq>
                <delete>
                  <marker>@-2</marker>
                </delete>
                <insert>
                  <integer>0x0D93</integer>
                </insert>
              </list>
              <list>
                <logior>
                  <lt>
                    <varref vname="c"/>
                    <integer>0x0D9A</integer>
                  </lt>
                  <gt>
                    <varref vname="c"/>
                    <integer>0x0DC6</integer>
                  </gt>
                </logior>
                <delete>
                  <marker>@-1</marker>
                </delete>
                <insert>
                  <integer>0x0D93</integer>
                </insert>
              </list>
              <list>
                <integer>1</integer>
                <insert>
                  <integer>0x0D91</integer>
                </insert>
              </list>
            </cond>
          </list>
          <list>
            <integer>1</integer>
            <insert>
              <integer>0x0D91</integer>
            </insert>
          </list>
        </cond>
      </rule>
      <rule>
        <keyseq>
          <string>a</string>
        </keyseq>
        <set vname="c">
          <char-at>
            <marker>@-1</marker>
          </char-at>
        </set>
        <cond>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0D91</integer>
            </eq>
            <delete>
              <marker>@-1</marker>
            </delete>
            <insert>
              <integer>0x0D92</integer>
            </insert>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0D94</integer>
            </eq>
            <delete>
              <marker>@-1</marker>
            </delete>
            <insert>
              <integer>0x0D95</integer>
            </insert>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0DD9</integer>
            </eq>
            <delete>
              <marker>@-1</marker>
            </delete>
            <insert>
              <integer>0x0DDA</integer>
            </insert>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0DDC</integer>
            </eq>
            <delete>
              <marker>@-1</marker>
            </delete>
            <insert>
              <integer>0x0DDD</integer>
            </insert>
          </list>
          <list>
            <integer>1</integer>
            <insert>
              <integer>0x0DCA</integer>
            </insert>
          </list>
        </cond>
      </rule>
      <rule>
        <keyseq>
          <string>d</string>
        </keyseq>
        <set vname="c">
          <char-at>
            <marker>@-1</marker>
          </char-at>
        </set>
        <cond>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0D85</integer>
            </eq>
            <delete>
              <marker>@-1</marker>
            </delete>
            <insert>
              <integer>0x0D86</integer>
            </insert>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0DD9</integer>
            </eq>
            <delete>
              <marker>@-1</marker>
            </delete>
            <insert>
              <integer>0x0DDC</integer>
            </insert>
          </list>
          <list>
            <integer>1</integer>
            <insert>
              <integer>0x0DCF</integer>
            </insert>
          </list>
        </cond>
      </rule>
      <rule>
        <keyseq>
          <string>e</string>
        </keyseq>
        <cond>
          <list>
            <eq>
              <char-at>
                <marker>@-1</marker>
              </char-at>
              <integer>0x0D85</integer>
            </eq>
            <delete>
              <marker>@-1</marker>
            </delete>
            <insert>
              <integer>0x0D87</integer>
            </insert>
          </list>
          <list>
            <integer>1</integer>
            <insert>
              <integer>0x0DD0</integer>
            </insert>
          </list>
        </cond>
      </rule>
      <rule>
        <keyseq>
          <string>E</string>
        </keyseq>
        <set vname="c">
          <char-at>
            <marker>@-1</marker>
          </char-at>
        </set>
        <cond>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0D85</integer>
            </eq>
            <delete>
              <marker>@-1</marker>
            </delete>
            <insert>
              <integer>0x0D88</integer>
            </insert>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0DD4</integer>
            </eq>
            <cond>
              <list>
                <eq>
                  <char-at>
                    <marker>@-2</marker>
                  </char-at>
                  <integer>0x0DC5</integer>
                </eq>
                <delete>
                  <marker>@-1</marker>
                </delete>
                <insert>
                  <integer>0x0DD6</integer>
                </insert>
              </list>
              <list>
                <integer>1</integer>
                <insert>
                  <integer>0x0DD1</integer>
                </insert>
              </list>
            </cond>
          </list>
          <list>
            <integer>1</integer>
            <insert>
              <integer>0x0DD1</integer>
            </insert>
          </list>
        </cond>
      </rule>
      <rule>
        <keyseq>
          <string>D</string>
        </keyseq>
        <set vname="c">
          <char-at>
            <marker>@-1</marker>
          </char-at>
        </set>
        <cond>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0D8D</integer>
            </eq>
            <delete>
              <marker>@-1</marker>
            </delete>
            <insert>
              <integer>0x0D8E</integer>
            </insert>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0DD8</integer>
            </eq>
            <delete>
              <marker>@-1</marker>
            </delete>
            <insert>
              <integer>0x0DF2</integer>
            </insert>
          </list>
          <list>
            <integer>1</integer>
            <insert>
              <integer>0x0DD8</integer>
            </insert>
          </list>
        </cond>
      </rule>
      <rule>
        <keyseq>
          <string>A</string>
        </keyseq>
        <set vname="c">
          <char-at>
            <marker>@-1</marker>
          </char-at>
        </set>
        <cond>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0D8B</integer>
            </eq>
            <delete>
              <marker>@-1</marker>
            </delete>
            <insert>
              <integer>0x0D8C</integer>
            </insert>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0D8F</integer>
            </eq>
            <delete>
              <marker>@-1</marker>
            </delete>
            <insert>
              <integer>0x0D90</integer>
            </insert>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0D94</integer>
            </eq>
            <delete>
              <marker>@-1</marker>
            </delete>
            <insert>
              <integer>0x0D96</integer>
            </insert>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0DD9</integer>
            </eq>
            <delete>
              <marker>@-1</marker>
            </delete>
            <insert>
              <integer>0x0DDE</integer>
            </insert>
          </list>
          <list>
            <integer>1</integer>
            <insert>
              <integer>0x0DDF</integer>
            </insert>
          </list>
        </cond>
      </rule>
      <rule>
        <keyseq>
          <string>f</string>
        </keyseq>
        <set vname="c">
          <char-at>
            <marker>@+0</marker>
          </char-at>
        </set>
        <cond>
          <list>
            <logand>
              <ge>
                <varref vname="c"/>
                <integer>0x0D9A</integer>
              </ge>
              <le>
                <varref vname="c"/>
                <integer>0x0DC6</integer>
              </le>
            </logand>
            <delete>
              <marker>@+1</marker>
            </delete>
            <insert>
              <varref vname="c"/>
            </insert>
            <funcall fname="macro-forward"/>
            <set vname="c">
              <char-at>
                <marker>@+0</marker>
              </char-at>
            </set>
            <cond>
              <list>
                <eq>
                  <varref vname="c"/>
                  <integer>0x0DCA</integer>
                </eq>
                <delete>
                  <marker>@+1</marker>
                </delete>
                <insert>
                  <integer>0x0DDA</integer>
                </insert>
              </list>
              <list>
                <eq>
                  <varref vname="c"/>
                  <integer>0x0DD9</integer>
                </eq>
                <delete>
                  <marker>@+1</marker>
                </delete>
                <insert>
                  <integer>0x0DDB</integer>
                </insert>
              </list>
              <list>
                <eq>
                  <varref vname="c"/>
                  <integer>0x0DCF</integer>
                </eq>
                <delete>
                  <marker>@+1</marker>
                </delete>
                <insert>
                  <integer>0x0DDC</integer>
                </insert>
              </list>
              <list>
                <eq>
                  <varref vname="c"/>
                  <integer>0x0DDF</integer>
                </eq>
                <delete>
                  <marker>@+1</marker>
                </delete>
                <insert>
                  <integer>0x0DDE</integer>
                </insert>
              </list>
              <list>
                <integer>1</integer>
                <insert>
                  <integer>0x0DD9</integer>
                </insert>
              </list>
            </cond>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0D91</integer>
            </eq>
            <delete>
              <marker>@+1</marker>
            </delete>
            <insert>
              <integer>0x0D93</integer>
            </insert>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0DD9</integer>
            </eq>
            <delete>
              <marker>@+1</marker>
            </delete>
            <insert>
              <integer>0x0DDB</integer>
            </insert>
          </list>
          <list>
            <logand>
              <eq>
                <varref vname="c"/>
                <integer>0x200C</integer>
              </eq>
              <eq>
                <char-at>
                  <marker>@+1</marker>
                </char-at>
                <integer>0x0DD9</integer>
              </eq>
            </logand>
            <delete>
              <marker>@+2</marker>
            </delete>
            <insert>
              <integer>0x200C</integer>
            </insert>
            <insert>
              <integer>0x0DDB</integer>
            </insert>
          </list>
          <list>
            <logand>
              <eq>
                <char-at>
                  <marker>@-1</marker>
                </char-at>
                <integer>0x0DD9</integer>
              </eq>
              <logior>
                <lt>
                  <char-at>
                    <marker>@-2</marker>
                  </char-at>
                  <integer>0x0D9A</integer>
                </lt>
                <gt>
                  <char-at>
                    <marker>@-2</marker>
                  </char-at>
                  <integer>0x0DC6</integer>
                </gt>
              </logior>
            </logand>
            <delete>
              <marker>@-1</marker>
            </delete>
            <insert>
              <integer>0x0DDB</integer>
            </insert>
          </list>
          <list>
            <logand>
              <ge>
                <char-at>
                  <marker>@-1</marker>
                </char-at>
                <integer>0x0D9A</integer>
              </ge>
              <le>
                <char-at>
                  <marker>@-1</marker>
                </char-at>
                <integer>0x0DC6</integer>
              </le>
            </logand>
            <insert>
              <integer>0x200C</integer>
            </insert>
            <insert>
              <integer>0x0DD9</integer>
            </insert>
          </list>
          <list>
            <integer>1</integer>
            <insert>
              <integer>0x0DD9</integer>
            </insert>
          </list>
        </cond>
      </rule>
      <rule>
        <keyseq>
          <list>
            <symbol>A-z</symbol>
          </list>
        </keyseq>
        <set vname="c">
          <char-at>
            <marker>@-1</marker>
          </char-at>
        </set>
        <cond>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0DAF</integer>
            </eq>
            <delete>
              <marker>@-1</marker>
            </delete>
            <insert>
              <integer>0x0DB3</integer>
            </insert>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0D9C</integer>
            </eq>
            <delete>
              <marker>@-1</marker>
            </delete>
            <insert>
              <integer>0x0D9F</integer>
            </insert>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0DA9</integer>
            </eq>
            <delete>
              <marker>@-1</marker>
            </delete>
            <insert>
              <integer>0x0DAC</integer>
            </insert>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0DA2</integer>
            </eq>
            <delete>
              <marker>@-1</marker>
            </delete>
            <insert>
              <integer>0x0DA6</integer>
            </insert>
          </list>
        </cond>
      </rule>
      <rule>
        <keyseq>
          <string>H</string>
        </keyseq>
        <set vname="c">
          <char-at>
            <marker>@-1</marker>
          </char-at>
        </set>
        <cond>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0DD9</integer>
            </eq>
            <delete>
              <marker>@-1</marker>
            </delete>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0DDB</integer>
            </eq>
            <delete>
              <marker>@-1</marker>
            </delete>
          </list>
          <list>
            <integer>1</integer>
            <set vname="c">
              <integer>0</integer>
            </set>
          </list>
        </cond>
        <cond>
          <list>
            <logand>
              <ge>
                <char-at>
                  <marker>@-1</marker>
                </char-at>
                <integer>0x0D9A</integer>
              </ge>
              <le>
                <char-at>
                  <marker>@-1</marker>
                </char-at>
                <integer>0x0DC6</integer>
              </le>
            </logand>
            <insert>
              <integer>0x0DCA</integer>
            </insert>
            <insert>
              <integer>0x200D</integer>
            </insert>
            <insert>
              <integer>0x0DBA</integer>
            </insert>
          </list>
        </cond>
        <cond>
          <list>
            <gt>
              <varref vname="c"/>
              <integer>0</integer>
            </gt>
            <insert>
              <varref vname="c"/>
            </insert>
          </list>
        </cond>
      </rule>
      <rule>
        <keyseq>
          <string>`</string>
        </keyseq>
        <set vname="c">
          <char-at>
            <marker>@-1</marker>
          </char-at>
        </set>
        <cond>
          <list>
            <logior>
              <eq>
                <varref vname="c"/>
                <integer>0x0DD9</integer>
              </eq>
              <eq>
                <varref vname="c"/>
                <integer>0x0DDB</integer>
              </eq>
              <eq>
                <varref vname="c"/>
                <integer>0x0DD2</integer>
              </eq>
              <eq>
                <varref vname="c"/>
                <integer>0x0DD3</integer>
              </eq>
            </logior>
            <delete>
              <marker>@-1</marker>
            </delete>
          </list>
          <list>
            <integer>1</integer>
            <set vname="c">
              <integer>0</integer>
            </set>
          </list>
        </cond>
        <cond>
          <list>
            <logand>
              <ge>
                <char-at>
                  <marker>@-1</marker>
                </char-at>
                <integer>0x0D9A</integer>
              </ge>
              <le>
                <char-at>
                  <marker>@-1</marker>
                </char-at>
                <integer>0x0DC6</integer>
              </le>
            </logand>
            <insert>
              <integer>0x0DCA</integer>
            </insert>
            <insert>
              <integer>0x200D</integer>
            </insert>
            <insert>
              <integer>0x0DBB</integer>
            </insert>
          </list>
        </cond>
        <cond>
          <list>
            <gt>
              <varref vname="c"/>
              <integer>0</integer>
            </gt>
            <insert>
              <varref vname="c"/>
            </insert>
          </list>
        </cond>
      </rule>
      <rule>
        <keyseq>
          <string>~</string>
        </keyseq>
        <set vname="c">
          <char-at>
            <marker>@-1</marker>
          </char-at>
        </set>
        <cond>
          <list>
            <logior>
              <eq>
                <varref vname="c"/>
                <integer>0x0DD9</integer>
              </eq>
              <eq>
                <varref vname="c"/>
                <integer>0x0DDB</integer>
              </eq>
            </logior>
            <delete>
              <marker>@-1</marker>
            </delete>
          </list>
          <list>
            <integer>1</integer>
            <set vname="c">
              <integer>0</integer>
            </set>
          </list>
        </cond>
        <funcall fname="macro-backward"/>
        <cond>
          <list>
            <logand>
              <ge>
                <char-at>
                  <marker>@-1</marker>
                </char-at>
                <integer>0x0D9A</integer>
              </ge>
              <le>
                <char-at>
                  <marker>@-1</marker>
                </char-at>
                <integer>0x0DC6</integer>
              </le>
            </logand>
            <set vname="c1">
              <char-at>
                <marker>@-1</marker>
              </char-at>
            </set>
            <delete>
              <marker>@-1</marker>
            </delete>
            <insert>
              <varref vname="c1"/>
            </insert>
            <move>
              <marker>@&lt;</marker>
            </move>
            <insert>
              <integer>0x0DBB</integer>
            </insert>
            <insert>
              <integer>0x0DCA</integer>
            </insert>
            <insert>
              <integer>0x200D</integer>
            </insert>
          </list>
        </cond>
        <cond>
          <list>
            <gt>
              <varref vname="c"/>
              <integer>0</integer>
            </gt>
            <move>
              <marker>@&gt;</marker>
            </move>
            <insert>
              <varref vname="c"/>
            </insert>
          </list>
        </cond>
      </rule>
      <rule>
        <keyseq>
          <list>
            <symbol>BackSpace</symbol>
          </list>
        </keyseq>
        <funcall fname="macro-delete-preceding-zw"/>
        <set vname="c">
          <char-at>
            <marker>@-1</marker>
          </char-at>
        </set>
        <cond>
          <list>
            <lt>
              <varref vname="c"/>
              <integer>0</integer>
            </lt>
            <unhandle/>
          </list>
        </cond>
        <delete>
          <marker>@-1</marker>
        </delete>
        <cond>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0D86</integer>
            </eq>
            <insert>
              <integer>0x0D85</integer>
            </insert>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0D87</integer>
            </eq>
            <insert>
              <integer>0x0D85</integer>
            </insert>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0D88</integer>
            </eq>
            <insert>
              <integer>0x0D85</integer>
            </insert>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0D8C</integer>
            </eq>
            <insert>
              <integer>0x0D8B</integer>
            </insert>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0D8E</integer>
            </eq>
            <insert>
              <integer>0x0D8D</integer>
            </insert>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0D90</integer>
            </eq>
            <insert>
              <integer>0x0D8F</integer>
            </insert>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0D92</integer>
            </eq>
            <insert>
              <integer>0x0D8F</integer>
            </insert>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0D93</integer>
            </eq>
            <cond>
              <list>
                <logand>
                  <ge>
                    <char-at>
                      <marker>@-1</marker>
                    </char-at>
                    <integer>0x0D9A</integer>
                  </ge>
                  <le>
                    <char-at>
                      <marker>@-1</marker>
                    </char-at>
                    <integer>0x0DC6</integer>
                  </le>
                </logand>
                <insert>
                  <integer>0x200C</integer>
                </insert>
              </list>
            </cond>
            <insert>
              <integer>0x0DD9</integer>
            </insert>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0D95</integer>
            </eq>
            <insert>
              <integer>0x0D94</integer>
            </insert>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0D96</integer>
            </eq>
            <insert>
              <integer>0x0D94</integer>
            </insert>
          </list>
          <list>
            <logand>
              <ge>
                <varref vname="c"/>
                <integer>0x0D9A</integer>
              </ge>
              <le>
                <varref vname="c"/>
                <integer>0x0DC6</integer>
              </le>
              <eq>
                <char-at>
                  <marker>@-2</marker>
                </char-at>
                <integer>0x0DCA</integer>
              </eq>
              <eq>
                <char-at>
                  <marker>@-1</marker>
                </char-at>
                <integer>0x200D</integer>
              </eq>
            </logand>
            <cond>
              <list>
                <eq>
                  <char-at>
                    <marker>@-3</marker>
                  </char-at>
                  <integer>0x0DBB</integer>
                </eq>
                <delete>
                  <marker>@-3</marker>
                </delete>
                <insert>
                  <varref vname="c"/>
                </insert>
              </list>
              <list>
                <integer>1</integer>
                <delete>
                  <marker>@-2</marker>
                </delete>
              </list>
            </cond>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0DD9</integer>
            </eq>
            <cond>
              <list>
                <logior>
                  <lt>
                    <char-at>
                      <marker>@-1</marker>
                    </char-at>
                    <integer>0x0D9A</integer>
                  </lt>
                  <gt>
                    <char-at>
                      <marker>@-1</marker>
                    </char-at>
                    <integer>0x0DC6</integer>
                  </gt>
                </logior>
              </list>
              <list>
                <eq>
                  <char-at>
                    <marker>@+0</marker>
                  </char-at>
                  <integer>0x0D91</integer>
                </eq>
                <delete>
                  <marker>@-1</marker>
                </delete>
                <delete>
                  <marker>@+1</marker>
                </delete>
                <insert>
                  <integer>0x0D93</integer>
                </insert>
              </list>
              <list>
                <logand>
                  <ge>
                    <char-at>
                      <marker>@+0</marker>
                    </char-at>
                    <integer>0x0D9A</integer>
                  </ge>
                  <le>
                    <char-at>
                      <marker>@+0</marker>
                    </char-at>
                    <integer>0x0DC6</integer>
                  </le>
                </logand>
                <set vname="c1">
                  <char-at>
                    <marker>@+0</marker>
                  </char-at>
                </set>
                <cond>
                  <list>
                    <eq>
                      <char-at>
                        <marker>@+1</marker>
                      </char-at>
                      <integer>0x0DD9</integer>
                    </eq>
                    <funcall fname="macro-merge-kombuva"/>
                    <insert>
                      <integer>0x0DDB</integer>
                    </insert>
                  </list>
                  <list>
                    <eq>
                      <char-at>
                        <marker>@+1</marker>
                      </char-at>
                      <integer>0x0DCA</integer>
                    </eq>
                    <funcall fname="macro-merge-kombuva"/>
                    <insert>
                      <integer>0x0DDA</integer>
                    </insert>
                  </list>
                  <list>
                    <eq>
                      <char-at>
                        <marker>@+1</marker>
                      </char-at>
                      <integer>0x0DCF</integer>
                    </eq>
                    <funcall fname="macro-merge-kombuva"/>
                    <insert>
                      <integer>0x0DDC</integer>
                    </insert>
                  </list>
                  <list>
                    <eq>
                      <char-at>
                        <marker>@+1</marker>
                      </char-at>
                      <integer>0x0DDF</integer>
                    </eq>
                    <funcall fname="macro-merge-kombuva"/>
                    <insert>
                      <integer>0x0DDE</integer>
                    </insert>
                  </list>
                  <list>
                    <integer>1</integer>
                    <delete>
                      <marker>@-1</marker>
                    </delete>
                    <delete>
                      <marker>@+1</marker>
                    </delete>
                    <insert>
                      <varref vname="c1"/>
                    </insert>
                    <insert>
                      <integer>0x0DD9</integer>
                    </insert>
                  </list>
                </cond>
              </list>
              <list>
                <logand>
                  <ge>
                    <char-at>
                      <marker>@-2</marker>
                    </char-at>
                    <integer>0x0D9A</integer>
                  </ge>
                  <le>
                    <char-at>
                      <marker>@-2</marker>
                    </char-at>
                    <integer>0x0DC6</integer>
                  </le>
                </logand>
                <delete>
                  <marker>@-1</marker>
                </delete>
                <insert>
                  <integer>0x200C</integer>
                </insert>
                <insert>
                  <integer>0x0DD9</integer>
                </insert>
              </list>
              <list>
                <logand>
                  <eq>
                    <char-at>
                      <marker>@-4</marker>
                    </char-at>
                    <integer>0x0DBB</integer>
                  </eq>
                  <eq>
                    <char-at>
                      <marker>@-3</marker>
                    </char-at>
                    <integer>0x0DCA</integer>
                  </eq>
                  <eq>
                    <char-at>
                      <marker>@-2</marker>
                    </char-at>
                    <integer>0x200D</integer>
                  </eq>
                </logand>
                <set vname="c1">
                  <char-at>
                    <marker>@-1</marker>
                  </char-at>
                </set>
                <delete>
                  <marker>@-4</marker>
                </delete>
                <insert>
                  <varref vname="c1"/>
                </insert>
                <insert>
                  <integer>0x0DD9</integer>
                </insert>
              </list>
              <list>
                <logand>
                  <ge>
                    <char-at>
                      <marker>@-4</marker>
                    </char-at>
                    <integer>0x0D9A</integer>
                  </ge>
                  <le>
                    <char-at>
                      <marker>@-4</marker>
                    </char-at>
                    <integer>0x0DC6</integer>
                  </le>
                  <eq>
                    <char-at>
                      <marker>@-3</marker>
                    </char-at>
                    <integer>0x0DCA</integer>
                  </eq>
                  <eq>
                    <char-at>
                      <marker>@-2</marker>
                    </char-at>
                    <integer>0x200D</integer>
                  </eq>
                </logand>
                <delete>
                  <marker>@-3</marker>
                </delete>
                <insert>
                  <integer>0x0DD9</integer>
                </insert>
              </list>
              <list>
                <integer>1</integer>
                <delete>
                  <marker>@-1</marker>
                </delete>
                <insert>
                  <integer>0x0DD9</integer>
                </insert>
              </list>
            </cond>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0DDA</integer>
            </eq>
            <insert>
              <integer>0x0DD9</integer>
            </insert>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0DDB</integer>
            </eq>
            <cond>
              <list>
                <logior>
                  <lt>
                    <char-at>
                      <marker>@-1</marker>
                    </char-at>
                    <integer>0x0D9A</integer>
                  </lt>
                  <gt>
                    <char-at>
                      <marker>@-1</marker>
                    </char-at>
                    <integer>0x0DC6</integer>
                  </gt>
                </logior>
                <insert>
                  <integer>0x0DD9</integer>
                </insert>
              </list>
              <list>
                <logand>
                  <ge>
                    <char-at>
                      <marker>@-2</marker>
                    </char-at>
                    <integer>0x0D9A</integer>
                  </ge>
                  <le>
                    <char-at>
                      <marker>@-2</marker>
                    </char-at>
                    <integer>0x0DC6</integer>
                  </le>
                </logand>
                <delete>
                  <marker>@-1</marker>
                </delete>
                <insert>
                  <integer>0x200C</integer>
                </insert>
                <insert>
                  <integer>0x0DDB</integer>
                </insert>
              </list>
              <list>
                <logand>
                  <eq>
                    <char-at>
                      <marker>@-4</marker>
                    </char-at>
                    <integer>0x0DBB</integer>
                  </eq>
                  <eq>
                    <char-at>
                      <marker>@-3</marker>
                    </char-at>
                    <integer>0x0DCA</integer>
                  </eq>
                  <eq>
                    <char-at>
                      <marker>@-2</marker>
                    </char-at>
                    <integer>0x200D</integer>
                  </eq>
                </logand>
                <set vname="c1">
                  <char-at>
                    <marker>@-1</marker>
                  </char-at>
                </set>
                <delete>
                  <marker>@-4</marker>
                </delete>
                <insert>
                  <varref vname="c1"/>
                </insert>
                <insert>
                  <integer>0x0DDB</integer>
                </insert>
              </list>
              <list>
                <logand>
                  <ge>
                    <char-at>
                      <marker>@-4</marker>
                    </char-at>
                    <integer>0x0D9A</integer>
                  </ge>
                  <le>
                    <char-at>
                      <marker>@-4</marker>
                    </char-at>
                    <integer>0x0DC6</integer>
                  </le>
                  <eq>
                    <char-at>
                      <marker>@-3</marker>
                    </char-at>
                    <integer>0x0DCA</integer>
                  </eq>
                  <eq>
                    <char-at>
                      <marker>@-2</marker>
                    </char-at>
                    <integer>0x200D</integer>
                  </eq>
                </logand>
                <delete>
                  <marker>@-3</marker>
                </delete>
                <insert>
                  <integer>0x0DDB</integer>
                </insert>
              </list>
              <list>
                <integer>1</integer>
                <delete>
                  <marker>@-1</marker>
                </delete>
                <insert>
                  <integer>0x0DDB</integer>
                </insert>
              </list>
            </cond>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0DDC</integer>
            </eq>
            <insert>
              <integer>0x0DD9</integer>
            </insert>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0DDD</integer>
            </eq>
            <insert>
              <integer>0x0DDC</integer>
            </insert>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0DDE</integer>
            </eq>
            <insert>
              <integer>0x0DD9</integer>
            </insert>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0DF2</integer>
            </eq>
            <insert>
              <integer>0x0DD8</integer>
            </insert>
          </list>
        </cond>
        <cond>
          <list>
            <logand>
              <ge>
                <char-at>
                  <marker>@-1</marker>
                </char-at>
                <integer>0x0D9A</integer>
              </ge>
              <le>
                <char-at>
                  <marker>@-1</marker>
                </char-at>
                <integer>0x0DC6</integer>
              </le>
              <logior>
                <eq>
                  <char-at>
                    <marker>@+0</marker>
                  </char-at>
                  <integer>0x0DD9</integer>
                </eq>
                <eq>
                  <char-at>
                    <marker>@+0</marker>
                  </char-at>
                  <integer>0x0DDB</integer>
                </eq>
              </logior>
            </logand>
            <insert>
              <integer>0x200C</integer>
            </insert>
          </list>
        </cond>
      </rule>
      <rule>
        <keyseq>
          <list>
            <symbol>Delete</symbol>
          </list>
        </keyseq>
        <funcall fname="macro-delete-following-zw"/>
        <set vname="c">
          <char-at>
            <marker>@+0</marker>
          </char-at>
        </set>
        <cond>
          <list>
            <lt>
              <varref vname="c"/>
              <integer>0</integer>
            </lt>
            <unhandle/>
          </list>
        </cond>
        <delete>
          <marker>@+1</marker>
        </delete>
        <cond>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0D86</integer>
            </eq>
            <insert>
              <integer>0x0DCF</integer>
            </insert>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0D87</integer>
            </eq>
            <insert>
              <integer>0x0DD0</integer>
            </insert>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0D88</integer>
            </eq>
            <insert>
              <integer>0x0DD1</integer>
            </insert>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0D8C</integer>
            </eq>
            <insert>
              <integer>0x0DDF</integer>
            </insert>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0D8E</integer>
            </eq>
            <insert>
              <integer>0x0DD8</integer>
            </insert>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0D90</integer>
            </eq>
            <insert>
              <integer>0x0DDF</integer>
            </insert>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0D92</integer>
            </eq>
            <insert>
              <integer>0x0DCA</integer>
            </insert>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0D93</integer>
            </eq>
            <insert>
              <integer>0x0D91</integer>
            </insert>
          </list>
          <list>
            <logand>
              <ge>
                <varref vname="c"/>
                <integer>0x0D9A</integer>
              </ge>
              <le>
                <varref vname="c"/>
                <integer>0x0DC6</integer>
              </le>
            </logand>
            <funcall fname="macro-forward"/>
            <cond>
              <list>
                <eq>
                  <char-at>
                    <marker>@+0</marker>
                  </char-at>
                  <integer>0x0DD9</integer>
                </eq>
                <delete>
                  <marker>@+1</marker>
                </delete>
                <move>
                  <marker>@&lt;</marker>
                </move>
                <insert>
                  <varref vname="c"/>
                </insert>
              </list>
              <list>
                <eq>
                  <char-at>
                    <marker>@+0</marker>
                  </char-at>
                  <integer>0x0DDB</integer>
                </eq>
                <delete>
                  <marker>@+1</marker>
                </delete>
                <insert>
                  <integer>0x0DD9</integer>
                </insert>
                <move>
                  <marker>@&lt;</marker>
                </move>
                <insert>
                  <varref vname="c"/>
                </insert>
              </list>
              <list>
                <eq>
                  <char-at>
                    <marker>@+0</marker>
                  </char-at>
                  <integer>0x0DDA</integer>
                </eq>
                <delete>
                  <marker>@+1</marker>
                </delete>
                <insert>
                  <integer>0x0DCA</integer>
                </insert>
                <move>
                  <marker>@&lt;</marker>
                </move>
                <insert>
                  <varref vname="c"/>
                </insert>
              </list>
              <list>
                <eq>
                  <char-at>
                    <marker>@+0</marker>
                  </char-at>
                  <integer>0x0DDC</integer>
                </eq>
                <delete>
                  <marker>@+1</marker>
                </delete>
                <insert>
                  <integer>0x0DCF</integer>
                </insert>
                <move>
                  <marker>@&lt;</marker>
                </move>
                <insert>
                  <varref vname="c"/>
                </insert>
              </list>
              <list>
                <eq>
                  <char-at>
                    <marker>@+0</marker>
                  </char-at>
                  <integer>0x0DDE</integer>
                </eq>
                <delete>
                  <marker>@+1</marker>
                </delete>
                <insert>
                  <integer>0x0DDF</integer>
                </insert>
                <move>
                  <marker>@&lt;</marker>
                </move>
                <insert>
                  <varref vname="c"/>
                </insert>
              </list>
              <list>
                <integer>1</integer>
                <delete>
                  <marker>@&lt;</marker>
                </delete>
              </list>
            </cond>
          </list>
          <list>
            <eq>
              <varref vname="c"/>
              <integer>0x0DDB</integer>
            </eq>
            <insert>
              <integer>0x0DD9</integer>
            </insert>
          </list>
        </cond>
      </rule>
    </map>
    <map mname="map-independent">
      <rule>
        <keyseq>
          <string>w</string>
        </keyseq>
        <insert>
          <string>අ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>b</string>
        </keyseq>
        <insert>
          <string>ඉ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>B</string>
        </keyseq>
        <insert>
          <string>ඊ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>W</string>
        </keyseq>
        <insert>
          <string>උ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>R</string>
        </keyseq>
        <insert>
          <string>ඍ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <list>
            <symbol>A-,</symbol>
          </list>
        </keyseq>
        <insert>
          <string>ඏ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>t</string>
        </keyseq>
        <insert>
          <string>එ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>T</string>
        </keyseq>
        <insert>
          <string>ඔ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>l</string>
        </keyseq>
        <insert>
          <string>ක</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>L</string>
        </keyseq>
        <insert>
          <string>ඛ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>.</string>
        </keyseq>
        <insert>
          <string>ග</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>&gt;</string>
        </keyseq>
        <insert>
          <string>ඝ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>X</string>
        </keyseq>
        <insert>
          <string>ඞ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <list>
            <symbol>A-.</symbol>
          </list>
        </keyseq>
        <insert>
          <string>ඟ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <list>
            <integer>0x2E</integer>
            <symbol>A-z</symbol>
          </list>
        </keyseq>
        <insert>
          <string>ඟ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>p</string>
        </keyseq>
        <insert>
          <string>ච</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>P</string>
        </keyseq>
        <insert>
          <string>ඡ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>c</string>
        </keyseq>
        <insert>
          <string>ජ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>C</string>
        </keyseq>
        <insert>
          <string>ඣ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>[</string>
        </keyseq>
        <insert>
          <string>ඤ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>{</string>
        </keyseq>
        <insert>
          <string>ඥ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <list>
            <symbol>A-c</symbol>
          </list>
        </keyseq>
        <insert>
          <string>ඦ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <list>
            <integer>0x63</integer>
            <symbol>A-z</symbol>
          </list>
        </keyseq>
        <insert>
          <string>ඦ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>g</string>
        </keyseq>
        <insert>
          <string>ට</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>G</string>
        </keyseq>
        <insert>
          <string>ඨ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>v</string>
        </keyseq>
        <insert>
          <string>ඩ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>V</string>
        </keyseq>
        <insert>
          <string>ඪ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>K</string>
        </keyseq>
        <insert>
          <string>ණ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <list>
            <symbol>A-v</symbol>
          </list>
        </keyseq>
        <insert>
          <string>ඬ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <list>
            <integer>0x76</integer>
            <symbol>A-z</symbol>
          </list>
        </keyseq>
        <insert>
          <string>ඬ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>;</string>
        </keyseq>
        <insert>
          <string>ත</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>:</string>
        </keyseq>
        <insert>
          <string>ථ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>o</string>
        </keyseq>
        <insert>
          <string>ද</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>O</string>
        </keyseq>
        <insert>
          <string>ධ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>k</string>
        </keyseq>
        <insert>
          <string>න</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <list>
            <symbol>A-o</symbol>
          </list>
        </keyseq>
        <insert>
          <string>ඳ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <list>
            <integer>0x6F</integer>
            <symbol>A-z</symbol>
          </list>
        </keyseq>
        <insert>
          <string>ඳ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>m</string>
        </keyseq>
        <insert>
          <string>ප</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>M</string>
        </keyseq>
        <insert>
          <string>ඵ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>n</string>
        </keyseq>
        <insert>
          <string>බ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>N</string>
        </keyseq>
        <insert>
          <string>භ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>u</string>
        </keyseq>
        <insert>
          <string>ම</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>U</string>
        </keyseq>
        <insert>
          <string>ඹ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>h</string>
        </keyseq>
        <insert>
          <string>ය</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>r</string>
        </keyseq>
        <insert>
          <string>ර</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>,</string>
        </keyseq>
        <insert>
          <string>ල</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>j</string>
        </keyseq>
        <insert>
          <string>ව</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>Y</string>
        </keyseq>
        <insert>
          <string>ශ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>I</string>
        </keyseq>
        <insert>
          <string>ෂ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>i</string>
        </keyseq>
        <insert>
          <string>ස</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>y</string>
        </keyseq>
        <insert>
          <string>හ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>&lt;</string>
        </keyseq>
        <insert>
          <string>ළ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>F</string>
        </keyseq>
        <insert>
          <string>ෆ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <list>
            <symbol>A-'</symbol>
          </list>
        </keyseq>
        <insert>
          <string>෴</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>J</string>
        </keyseq>
        <insert>
          <string>ළු</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <list>
            <symbol>S- </symbol>
          </list>
        </keyseq>
        <insert>
          <string> </string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <list>
            <symbol>A- </symbol>
          </list>
        </keyseq>
        <insert>
          <string>‌</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>]</string>
        </keyseq>
        <insert>
          <string>;</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>}</string>
        </keyseq>
        <insert>
          <string>:</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>'</string>
        </keyseq>
        <insert>
          <string>.</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>"</string>
        </keyseq>
        <insert>
          <string>,</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>z</string>
        </keyseq>
        <insert>
          <string>'</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>Z</string>
        </keyseq>
        <insert>
          <string>"</string>
        </insert>
      </rule>
    </map>
    <map mname="map-dependent">
      <rule>
        <keyseq>
          <string>x</string>
        </keyseq>
        <insert>
          <string>ං</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <list>
            <symbol>A-x</symbol>
          </list>
        </keyseq>
        <insert>
          <string>ඃ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>a</string>
        </keyseq>
        <cond>
          <list>
            <eq>
              <char-at>
                <marker>@-1</marker>
              </char-at>
              <integer>0x0D91</integer>
            </eq>
            <delete>
              <marker>@-</marker>
            </delete>
            <insert>
              <string>ඒ</string>
            </insert>
          </list>
          <list>
            <eq>
              <char-at>
                <marker>@-1</marker>
              </char-at>
              <integer>0x0D94</integer>
            </eq>
            <delete>
              <marker>@-</marker>
            </delete>
            <insert>
              <string>ඕ</string>
            </insert>
          </list>
          <list>
            <eq>
              <char-at>
                <marker>@-1</marker>
              </char-at>
              <integer>0x0DD9</integer>
            </eq>
            <delete>
              <marker>@-</marker>
            </delete>
            <insert>
              <string>ේ</string>
            </insert>
          </list>
          <list>
            <eq>
              <char-at>
                <marker>@-1</marker>
              </char-at>
              <integer>0x0DDC</integer>
            </eq>
            <delete>
              <marker>@-</marker>
            </delete>
            <insert>
              <string>ෝ</string>
            </insert>
          </list>
          <list>
            <integer>1</integer>
            <insert>
              <string>්</string>
            </insert>
          </list>
        </cond>
      </rule>
      <rule>
        <keyseq>
          <string>d</string>
        </keyseq>
        <cond>
          <list>
            <eq>
              <char-at>
                <marker>@-1</marker>
              </char-at>
              <integer>0x0D85</integer>
            </eq>
            <delete>
              <marker>@-</marker>
            </delete>
            <insert>
              <string>ආ</string>
            </insert>
          </list>
          <list>
            <eq>
              <char-at>
                <marker>@-1</marker>
              </char-at>
              <integer>0x0DD9</integer>
            </eq>
            <delete>
              <marker>@-</marker>
            </delete>
            <insert>
              <string>ො</string>
            </insert>
          </list>
          <list>
            <integer>1</integer>
            <insert>
              <string>ා</string>
            </insert>
          </list>
        </cond>
      </rule>
      <rule>
        <keyseq>
          <string>e</string>
        </keyseq>
        <cond>
          <list>
            <eq>
              <char-at>
                <marker>@-1</marker>
              </char-at>
              <integer>0x0D85</integer>
            </eq>
            <delete>
              <marker>@-</marker>
            </delete>
            <insert>
              <string>ඇ</string>
            </insert>
          </list>
          <list>
            <integer>1</integer>
            <insert>
              <string>ැ</string>
            </insert>
          </list>
        </cond>
      </rule>
      <rule>
        <keyseq>
          <string>E</string>
        </keyseq>
        <cond>
          <list>
            <eq>
              <char-at>
                <marker>@-1</marker>
              </char-at>
              <integer>0x0D85</integer>
            </eq>
            <delete>
              <marker>@-</marker>
            </delete>
            <insert>
              <string>ඈ</string>
            </insert>
          </list>
          <list>
            <logand>
              <eq>
                <char-at>
                  <marker>@-2</marker>
                </char-at>
                <integer>0x0DC5</integer>
              </eq>
              <eq>
                <char-at>
                  <marker>@-1</marker>
                </char-at>
                <integer>0x0DD4</integer>
              </eq>
            </logand>
            <delete>
              <marker>@-</marker>
            </delete>
            <insert>
              <string>ූ</string>
            </insert>
          </list>
          <list>
            <integer>1</integer>
            <insert>
              <string>ෑ</string>
            </insert>
          </list>
        </cond>
      </rule>
      <rule>
        <keyseq>
          <string>s</string>
        </keyseq>
        <insert>
          <string>ි</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>S</string>
        </keyseq>
        <insert>
          <string>ී</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>q</string>
        </keyseq>
        <insert>
          <string>ු</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>Q</string>
        </keyseq>
        <insert>
          <string>ූ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>D</string>
        </keyseq>
        <cond>
          <list>
            <eq>
              <char-at>
                <marker>@-1</marker>
              </char-at>
              <integer>0x0D8D</integer>
            </eq>
            <delete>
              <marker>@-</marker>
            </delete>
            <insert>
              <string>ඎ</string>
            </insert>
          </list>
          <list>
            <integer>1</integer>
            <insert>
              <string>ෘ</string>
            </insert>
          </list>
        </cond>
      </rule>
      <rule>
        <keyseq>
          <string>DD</string>
        </keyseq>
        <insert>
          <string>ෲ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>A</string>
        </keyseq>
        <cond>
          <list>
            <eq>
              <char-at>
                <marker>@-1</marker>
              </char-at>
              <integer>0x0D8B</integer>
            </eq>
            <delete>
              <marker>@-</marker>
            </delete>
            <insert>
              <string>ඌ</string>
            </insert>
          </list>
          <list>
            <eq>
              <char-at>
                <marker>@-1</marker>
              </char-at>
              <integer>0x0D8F</integer>
            </eq>
            <delete>
              <marker>@-</marker>
            </delete>
            <insert>
              <string>ඐ</string>
            </insert>
          </list>
          <list>
            <eq>
              <char-at>
                <marker>@-1</marker>
              </char-at>
              <integer>0x0D94</integer>
            </eq>
            <delete>
              <marker>@-</marker>
            </delete>
            <insert>
              <string>ඖ</string>
            </insert>
          </list>
          <list>
            <eq>
              <char-at>
                <marker>@-1</marker>
              </char-at>
              <integer>0x0DD9</integer>
            </eq>
            <delete>
              <marker>@-</marker>
            </delete>
            <insert>
              <string>ෞ</string>
            </insert>
          </list>
          <list>
            <integer>1</integer>
            <insert>
              <string>ෟ</string>
            </insert>
          </list>
        </cond>
      </rule>
      <rule>
        <keyseq>
          <list>
            <symbol>A-a</symbol>
          </list>
        </keyseq>
        <insert>
          <string>ෳ</string>
        </insert>
      </rule>
      <rule>
        <keyseq>
          <string>H</string>
        </keyseq>
        <cond>
          <list>
            <logior>
              <eq>
                <char-at>
                  <marker>@-1</marker>
                </char-at>
                <integer>0x0DD9</integer>
              </eq>
              <eq>
                <char-at>
                  <marker>@-1</marker>
                </char-at>
                <integer>0x0DDB</integer>
              </eq>
            </logior>
            <move>
              <marker>@-</marker>
            </move>
            <insert>
              <string>්‍ය</string>
            </insert>
            <move>
              <marker>@&gt;</marker>
            </move>
          </list>
          <list>
            <integer>1</integer>
            <insert>
              <string>්‍ය</string>
            </insert>
          </list>
        </cond>
      </rule>
      <rule>
        <keyseq>
          <string>`</string>
        </keyseq>
        <cond>
          <list>
            <logior>
              <eq>
                <char-at>
                  <marker>@-1</marker>
                </char-at>
                <integer>0x0DD2</integer>
              </eq>
              <eq>
                <char-at>
                  <marker>@-1</marker>
                </char-at>
                <integer>0x0DD3</integer>
              </eq>
              <eq>
                <char-at>
                  <marker>@-1</marker>
                </char-at>
                <integer>0x0DD9</integer>
              </eq>
              <eq>
                <char-at>
                  <marker>@-1</marker>
                </char-at>
                <integer>0x0DDB</integer>
              </eq>
            </logior>
            <move>
              <marker>@-</marker>
            </move>
            <insert>
              <string>්‍ර</string>
            </insert>
            <move>
              <marker>@&gt;</marker>
            </move>
          </list>
          <list>
            <integer>1</integer>
            <insert>
              <string>්‍ර</string>
            </insert>
          </list>
        </cond>
      </rule>
      <rule>
        <keyseq>
          <string>~</string>
        </keyseq>
        <move>
          <marker>@&lt;</marker>
        </move>
        <insert>
          <string>ර්‍</string>
        </insert>
        <move>
          <marker>@&gt;</marker>
        </move>
      </rule>
    </map>
    <map mname="map-kombuva">
      <rule>
        <keyseq>
          <string>f</string>
        </keyseq>
        <insert>
          <string>ෙ</string>
        </insert>
      </rule>
    </map>
    <map mname="map-join">
      <rule>
        <keyseq>
          <string>\</string>
        </keyseq>
      </rule>
    </map>
    <map mname="map-backspace">
      <rule>
        <keyseq>
          <list>
            <symbol>BackSpace</symbol>
          </list>
        </keyseq>
      </rule>
    </map>
  </map-list>
  <state-list>
    <state sname="state-init">
      <branch mname="map-starter">
        <pushback>
          <integer>1</integer>
        </pushback>
        <cond>
          <list>
            <logand>
              <eq>
                <varref vname="use-surrounding-text"/>
                <integer>1</integer>
              </eq>
              <eq>
                <surrounding-text-flag/>
                <integer>-1</integer>
              </eq>
            </logand>
            <shift>
              <symbol>state-surrounding-text</symbol>
            </shift>
          </list>
          <list>
            <integer>1</integer>
            <shift>
              <symbol>state-preedit</symbol>
            </shift>
          </list>
        </cond>
      </branch>
    </state>
    <state sname="state-surrounding-text">
      <branch mname="map-consonant">
        <move>
          <marker>@&lt;</marker>
        </move>
        <cond>
          <list>
            <eq>
              <char-at>
                <marker>@-1</marker>
              </char-at>
              <integer>0x0DD9</integer>
            </eq>
            <cond>
              <list>
                <eq>
                  <char-at>
                    <marker>@-2</marker>
                  </char-at>
                  <integer>0x200C</integer>
                </eq>
                <delete>
                  <marker>@-2</marker>
                </delete>
                <move>
                  <marker>@&gt;</marker>
                </move>
                <insert>
                  <integer>0x0DD9</integer>
                </insert>
              </list>
              <list>
                <logior>
                  <lt>
                    <char-at>
                      <marker>@-2</marker>
                    </char-at>
                    <integer>0x0D9A</integer>
                  </lt>
                  <gt>
                    <char-at>
                      <marker>@-2</marker>
                    </char-at>
                    <integer>0x0DC6</integer>
                  </gt>
                </logior>
                <delete>
                  <marker>@-1</marker>
                </delete>
                <move>
                  <marker>@&gt;</marker>
                </move>
                <insert>
                  <integer>0x0DD9</integer>
                </insert>
              </list>
            </cond>
          </list>
          <list>
            <eq>
              <char-at>
                <marker>@-1</marker>
              </char-at>
              <integer>0x0DDB</integer>
            </eq>
            <cond>
              <list>
                <eq>
                  <char-at>
                    <marker>@-2</marker>
                  </char-at>
                  <integer>0x200C</integer>
                </eq>
                <delete>
                  <marker>@-2</marker>
                </delete>
                <move>
                  <marker>@&gt;</marker>
                </move>
                <insert>
                  <integer>0x0DDB</integer>
                </insert>
              </list>
              <list>
                <logior>
                  <lt>
                    <char-at>
                      <marker>@-2</marker>
                    </char-at>
                    <integer>0x0D9A</integer>
                  </lt>
                  <gt>
                    <char-at>
                      <marker>@-2</marker>
                    </char-at>
                    <integer>0x0DC6</integer>
                  </gt>
                </logior>
                <delete>
                  <marker>@-1</marker>
                </delete>
                <move>
                  <marker>@&gt;</marker>
                </move>
                <insert>
                  <integer>0x0DDB</integer>
                </insert>
              </list>
            </cond>
          </list>
        </cond>
        <commit/>
      </branch>
      <branch mname="map-misc">
        <commit/>
      </branch>
      <branch mname="map-join">
        <shift>
          <symbol>state-join</symbol>
        </shift>
      </branch>
    </state>
    <state sname="state-join">
      <branch mname="map-consonant">
        <move>
          <marker>@&lt;</marker>
        </move>
        <set vname="c">
          <char-at>
            <marker>@-1</marker>
          </char-at>
        </set>
        <cond>
          <list>
            <logior>
              <eq>
                <varref vname="c"/>
                <integer>0x0DD9</integer>
              </eq>
              <eq>
                <varref vname="c"/>
                <integer>0x0DDB</integer>
              </eq>
            </logior>
            <cond>
              <list>
                <logand>
                  <ge>
                    <char-at>
                      <marker>@-2</marker>
                    </char-at>
                    <integer>0x0D9A</integer>
                  </ge>
                  <le>
                    <char-at>
                      <marker>@-2</marker>
                    </char-at>
                    <integer>0x0DC6</integer>
                  </le>
                </logand>
                <delete>
                  <marker>@-1</marker>
                </delete>
                <insert>
                  <integer>0x0DCA</integer>
                </insert>
                <insert>
                  <integer>0x200D</integer>
                </insert>
                <move>
                  <marker>@&gt;</marker>
                </move>
                <insert>
                  <varref vname="c"/>
                </insert>
              </list>
            </cond>
          </list>
          <list>
            <logand>
              <ge>
                <varref vname="c"/>
                <integer>0x0D9A</integer>
              </ge>
              <le>
                <varref vname="c"/>
                <integer>0x0DC6</integer>
              </le>
            </logand>
            <insert>
              <integer>0x0DCA</integer>
            </insert>
            <insert>
              <integer>0x200D</integer>
            </insert>
          </list>
        </cond>
        <commit/>
        <shift>
          <symbol>state-surrounding-text</symbol>
        </shift>
      </branch>
      <catch-all-branch>
        <commit/>
        <shift>
          <symbol>state-surrounding-text</symbol>
        </shift>
      </catch-all-branch>
    </state>
    <state sname="state-preedit">
      <branch mname="map-independent">
        <shift>
          <symbol>state-independent-state</symbol>
        </shift>
      </branch>
      <branch mname="map-kombuva">
        <shift>
          <symbol>state-kombuva-state</symbol>
        </shift>
      </branch>
      <branch mname="map-dependent"/>
    </state>
    <state sname="state-independent-state">
      <branch mname="map-dependent"/>
      <branch mname="map-join">
        <cond>
          <list>
            <logior>
              <eq>
                <char-at>
                  <marker>@-1</marker>
                </char-at>
                <integer>0x0DD9</integer>
              </eq>
              <eq>
                <char-at>
                  <marker>@-1</marker>
                </char-at>
                <integer>0x0DDB</integer>
              </eq>
            </logior>
            <shift>
              <symbol>state-join-state</symbol>
            </shift>
          </list>
          <list>
            <logior>
              <lt>
                <char-at>
                  <marker>@-1</marker>
                </char-at>
                <integer>0x0D9A</integer>
              </lt>
              <gt>
                <char-at>
                  <marker>@-1</marker>
                </char-at>
                <integer>0x0DC6</integer>
              </gt>
            </logior>
            <undo>
              <integer>-1</integer>
            </undo>
          </list>
          <list>
            <integer>1</integer>
            <shift>
              <symbol>state-join-state</symbol>
            </shift>
          </list>
        </cond>
      </branch>
      <branch mname="map-backspace">
        <undo/>
      </branch>
    </state>
    <state sname="state-join-state">
      <state-hook>
        <mark>
          <marker>p</marker>
        </mark>
      </state-hook>
      <branch mname="map-independent">
        <move>
          <marker>p</marker>
        </move>
        <set vname="c">
          <char-at>
            <marker>@-1</marker>
          </char-at>
        </set>
        <cond>
          <list>
            <logior>
              <eq>
                <varref vname="c"/>
                <integer>0x0DD9</integer>
              </eq>
              <eq>
                <varref vname="c"/>
                <integer>0x0DDB</integer>
              </eq>
            </logior>
            <delete>
              <marker>@-</marker>
            </delete>
            <insert>
              <string>්‍</string>
            </insert>
            <move>
              <marker>@&gt;</marker>
            </move>
            <insert>
              <varref vname="c"/>
            </insert>
          </list>
          <list>
            <integer>1</integer>
            <insert>
              <string>්‍</string>
            </insert>
            <move>
              <marker>@&gt;</marker>
            </move>
          </list>
        </cond>
        <shift>
          <symbol>state-independent-state</symbol>
        </shift>
      </branch>
      <branch mname="map-backspace">
        <undo/>
      </branch>
    </state>
    <state sname="state-kombuva-state">
      <state-hook>
        <mark>
          <marker>p</marker>
        </mark>
      </state-hook>
      <branch mname="map-independent">
        <cond>
          <list>
            <logand>
              <eq>
                <char-at>
                  <marker>@0</marker>
                </char-at>
                <integer>0x0DD9</integer>
              </eq>
              <eq>
                <char-at>
                  <marker>@1</marker>
                </char-at>
                <integer>0x0D91</integer>
              </eq>
            </logand>
            <delete>
              <marker>@&lt;</marker>
            </delete>
            <insert>
              <string>ඓ</string>
            </insert>
            <shift>
              <symbol>state-independent-state</symbol>
            </shift>
          </list>
          <list>
            <logand>
              <eq>
                <char-at>
                  <marker>@0</marker>
                </char-at>
                <integer>0x0DD9</integer>
              </eq>
              <lt>
                <char-at>
                  <marker>@2</marker>
                </char-at>
                <integer>0</integer>
              </lt>
            </logand>
            <move>
              <marker>@0</marker>
            </move>
            <delete>
              <marker>@+</marker>
            </delete>
            <move>
              <marker>@&gt;</marker>
            </move>
            <insert>
              <string>ෙ</string>
            </insert>
            <shift>
              <symbol>state-independent-state</symbol>
            </shift>
          </list>
          <list>
            <logand>
              <eq>
                <char-at>
                  <marker>@0</marker>
                </char-at>
                <integer>0x0DDB</integer>
              </eq>
              <lt>
                <char-at>
                  <marker>@2</marker>
                </char-at>
                <integer>0</integer>
              </lt>
            </logand>
            <move>
              <marker>@0</marker>
            </move>
            <delete>
              <marker>@+</marker>
            </delete>
            <move>
              <marker>@&gt;</marker>
            </move>
            <insert>
              <string>ෛ</string>
            </insert>
            <shift>
              <symbol>state-independent-state</symbol>
            </shift>
          </list>
          <list>
            <integer>1</integer>
            <delete>
              <marker>p</marker>
            </delete>
            <pushback>
              <integer>1</integer>
            </pushback>
            <shift>
              <symbol>state-preedit</symbol>
            </shift>
          </list>
        </cond>
      </branch>
      <branch mname="map-kombuva">
        <mark>
          <marker>p</marker>
        </mark>
        <cond>
          <list>
            <logand>
              <eq>
                <char-at>
                  <marker>@0</marker>
                </char-at>
                <integer>0x0DD9</integer>
              </eq>
              <lt>
                <char-at>
                  <marker>@2</marker>
                </char-at>
                <integer>0</integer>
              </lt>
            </logand>
            <delete>
              <marker>@&lt;</marker>
            </delete>
            <insert>
              <string>ෛ</string>
            </insert>
          </list>
          <list>
            <integer>1</integer>
            <delete>
              <marker>@-</marker>
            </delete>
            <pushback>
              <integer>1</integer>
            </pushback>
            <shift>
              <symbol>state-preedit</symbol>
            </shift>
          </list>
        </cond>
      </branch>
      <branch mname="map-dependent">
        <mark>
          <marker>p</marker>
        </mark>
      </branch>
      <branch mname="map-backspace">
        <undo/>
      </branch>
    </state>
  </state-list>
</input-method>